{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","\nimport { Component } from '@angular/core';\nimport { BarcodeScanner ,BarcodeScannerOptions } from '@ionic-native/barcode-scanner/ngx';\nimport { formatDate } from '@angular/common';\n\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  scanData = {};;\n  options: BarcodeScannerOptions;\n  encodeData: string ;\n  encodedData = {}; ;\n  personalData = {\n    numeroCedula: '',\n    primerApellido: '',\n    segundoApellido: '',\n    primerNombre: '',\n    segundoNombre: '',\n    sexo: '',\n    fechaNacimiento: '',\n    rh: '',\n    nombreCompleto: '',\n  };\n\n\n  picture: any;\n\n  constructor(\n    private barcodeScanner: BarcodeScanner\n    ) {\n  }\n\n  scan(){\n      this.options = {\n          prompt : 'Leer CedÃºla',\n          preferFrontCamera : false, // iOS and Android\n          showFlipCameraButton : false, // iOS and Android\n          showTorchButton : false, // iOS and Android\n          torchOn: false, // Android, launch with the torch switched on (if available)\n          saveHistory: true, // Android, save scan history (default false)\n          resultDisplayDuration: 500, // Android, display scanned text for X ms. 0 suppresses it entirely, default 1500\n          formats : 'QR_CODE,PDF_417', // default: all but PDF_417 and RSS_EXPANDED\n          orientation : 'landscape', // Android only (portrait|landscape), default unset so it rotates with the device\n          disableAnimations : true, // iOS\n          disableSuccessBeep: false // iOS and Android\n      };\n      this.barcodeScanner.scan(this.options).then((barcodeData) => {\n\n          console.log(barcodeData);\n          this.scanData = barcodeData;\n          console.log(this.extraerDatosDocumentos(barcodeData.text));\n          console.log(this.personalData);\n      }, (err) => {\n          console.log('Error occured : ' + err);\n      });\n  }\n\n\n  // Metodo para extrar los datos del documento escaneado\n  extraerDatosDocumentos(data) {\n    const dataArray = data.replace(/[^A-Za-z0-9+]+/g, ' ').split(' ');\n\n    let indexMod = 0;\n    let numeroCedula;\n    let primerApellido;\n\n    // Is old document\n    if (/[A-Z]/g.test(dataArray[3])) {\n      indexMod = - 1;\n\n      const idString = dataArray[3].replace(/[A-Z]/g, '');\n      numeroCedula = idString.substring(8, idString.length);\n      primerApellido = dataArray[3].replace(/[0-9]/g, '');\n    } else {\n      numeroCedula = dataArray[4].replace(/[A-Z]/g, '');\n      primerApellido = dataArray[4].replace(/[0-9]/g, '');\n    }\n\n    const segundoApellido = dataArray[5 + indexMod].replace(/\\W/g, '');\n    const primerNombre = dataArray[6 + indexMod].replace(/\\W/g, '');\n    let segundoNombre;\n\n    if (!(/[0-9]/g.test(dataArray[7 + indexMod]))) {\n      segundoNombre = dataArray[7 + indexMod];\n    }\n\n    const extraData = dataArray[segundoNombre ? 8 + indexMod : 7 + indexMod];\n    let sexo = '';\n    if (extraData.includes('M')) {\n      sexo = 'Masculino';\n    } else {\n      sexo = 'Femenino';\n    }\n\n    const dia = extraData.substr(8, 2);\n    const mes = extraData.substr(6, 2);\n    const anio = extraData.substr(2, 4);\n    const fechaNacimiento = anio + '-' + mes + '-' + dia;\n    // extraData.substr(2, 8);\n    const rh = extraData.substr(-2);\n    const nombreCompleto = `${primerNombre} ${segundoNombre || ''} ${primerApellido} ${segundoApellido || ''}`;\n\n    this.personalData.numeroCedula = numeroCedula;\n    this.personalData.primerApellido = primerApellido;\n    this.personalData.segundoApellido = segundoApellido;\n    this.personalData.primerNombre = primerNombre;\n    this.personalData.segundoNombre = segundoNombre;\n    this.personalData.sexo = sexo;\n    this.personalData.fechaNacimiento = fechaNacimiento;\n    this.personalData.rh = rh;\n    this.personalData.nombreCompleto = nombreCompleto;\n\n    return {\n      numeroCedula,\n      primerApellido,\n      segundoApellido,\n      primerNombre,\n      segundoNombre,\n      sexo,\n      fechaNacimiento,\n      rh,\n      nombreCompleto,\n    };\n  }\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}